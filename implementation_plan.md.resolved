# Workflow Update Plan

The goal is to update the Cloudflare Workflow in [src/index.ts](file:///home/why/Workspace/web-automations-3/src/index.ts) to use the scraper defined in [src/step/1. lombait.ts](file:///home/why/Workspace/web-automations-3/src/step/1.%20lombait.ts) and ensure the results are output as JSON.

## User Review Required

> [!IMPORTANT]
> **Cloudflare Workers Environment**: This runs in a Cloudflare Worker environment where writing to the local filesystem (e.g., `fs.writeFile`) is not possible. "Saving to JSON" will be implemented as returning the JSON object from the workflow step and the final HTTP response. This allows the JSON to be viewed in the Workflow logs or the API response.

## Proposed Changes

### `src`

#### [MODIFY] [index.ts](file:///home/why/Workspace/web-automations-3/src/index.ts)
- Import [scrape](file:///home/why/Workspace/web-automations-3/src/step/1.%20lombait.ts#12-91) from `./step/1. lombait`.
- In **Step 1**, replace the dummy [fetch](file:///home/why/Workspace/web-automations-3/src/index.ts#50-85) and `cheerio` logic with a call to `await scrape()`.
- In **Step 2**, ensure the result is logged and returned (which effectively saves it to the Workflow history as JSON).

## Verification Plan

### Automated Tests
- None available in the repo.

### Manual Verification
- Deploy/Start the worker locally using `npm run dev` (or `npx wrangler dev`).
- Trigger the workflow via `curl http://localhost:8787/scrape` (or appropriate port).
- Verify the logs show the scraped data from `infolombait.com`.
- Verify the response contains the JSON output.
